name: KYUUBI
label: "Kyuubi"
description: "分布式和多租户的SQL网关"
version: 1.7.0
dockerImage: "registry.cn-hangzhou.aliyuncs.com/udh/kyuubi:1.7.0"
dependencies:
    - "HDFS"
    - "YARN"
    - "HIVE"
    - "SPARK"

runAs: kyuubi

supportKerberos: true

dashboard:
  uid: ""

roles:

  - name: KYUUBI_SERVER
    label: "Kyuubi Server"
    roleFullName: "kyuubi-server"
    sortNum: 1
    type: MASTER
    fixedNum: 1
    linkExpression: "http://${localhostname}:${conf['kyuubi.frontend.rest.bind.port']}"
    logFile: "flink-flink-historyserver-0-${localhostname}.log"


persistencePaths:
  - /opt/edp/${service.serviceName}/conf
  - /opt/edp/${service.serviceName}/log
  - /opt/edp/${service.serviceName}/data


customConfigFiles:
  - kyuubi-defaults.conf.ftl


configurations:

  - name: "kyuubi.frontend.thrift.binary.bind.port"
    recommendExpression: "10009"
    valueType: InputNumber
    configurableInWizard: true
    confFile:  "kyuubi-defaults.conf"
    description: "kyuubi front thrift服务端口"
    tag: "端口"
  - name: "kyuubi.frontend.rest.bind.port"
    recommendExpression: "10099"
    valueType: InputNumber
    configurableInWizard: true
    confFile:  "kyuubi-defaults.conf"
    description: "kyuubi front rest服务端口"
    tag: "端口"
  - name: "kyuubi.metrics.prometheus.port"
    recommendExpression: "10019"
    valueType: InputNumber
    configurableInWizard: true
    confFile:  "kyuubi-defaults.conf"
    description: "kyuubi prometheus服务端口"
    tag: "端口"

  - name: "kyuubi.engine.share.level"
    recommendExpression: USER
    valueType: Select
    options: ["CONNECTION","USER","GROUP","SERVER"]
    description: | 
    CONNECTION：引擎不会被共享，仅由当前客户端连接使用。这意味着每个连接都将启动一个新的查询引擎。
    USER：引擎将由所有由唯一用户名创建的会话共享。这意味着，具有相同用户名的所有会话都将共享同一个查询引擎。如果指定了kyuubi.engine.share.level.subdomain配置项，则可以将共享级别细分为更小的子域。
    GROUP：引擎将由所有属于同一主组名称的用户创建的会话共享。这意味着，具有相同主组名称的所有用户的会话都将共享同一个查询引擎。引擎将以组名作为有效用户名启动，因此组名是能够访问团队计算资源/数据的特殊用户的值。如果未找到主组，则回退到USER级别。
    SERVER：引擎将由所有Kyuubi服务器共享。这意味着，具有相同配置的所有Kyuubi服务器将共享同一个查询引擎。这种级别通常用于在大规模集群中共享资源。
    confFile:  "kyuubi-defaults.conf"
    tag: "高级参数"







